<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>Outfit Studio · Body Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

<style>
/* ===============================
   基本變數與 Reset
================================ */
:root{
  --bg:#f5f5f7;
  --card:#fff;
  --text:#1b1b1f;
  --muted:#6b7280;
  --line:#e5e7eb;
  --brand:#111827;
  --accent:#ff6b6b;
  --ok:#16a34a;
  --warn:#ef4444;
  --shadow:0 12px 30px rgba(0,0,0,.08);
  --r-lg:18px;
  --r-md:14px;
  --r-sm:10px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:"Noto Sans TC",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  color:var(--text);
  background: radial-gradient(circle at top, #ffecec 0, var(--bg) 45%, var(--bg) 100%);
}

/* ===============================
   Layout
================================ */
.page{max-width:1280px;margin:0 auto;padding:20px 14px 40px}
.layout{
  display:grid;
  grid-template-columns:minmax(320px,0.9fr) minmax(0,1.6fr);
  gap:16px;
  align-items:start;
}
@media(max-width:980px){
  .layout{grid-template-columns:1fr}
}

/* ===============================
   Card
================================ */
.card{
  background:var(--card);
  border-radius:var(--r-lg);
  box-shadow:var(--shadow);
  border:1px solid rgba(0,0,0,.04);
  padding:16px;
}

/* ===============================
   LEFT PANEL（關鍵修正）
================================ */
@media(min-width:1024px){
  .left-panel{
    position:sticky;
    top:24px;
    max-height:calc(100vh - 32px);
    display:flex;
    flex-direction:column;
  }
  .left-scroll{
    flex:1 1 auto;
    overflow-y:auto;
    padding-right:6px;
    min-height:0;
  }
  .left-footer{
    flex:0 0 auto;
    position:sticky;
    bottom:0;
    padding-top:10px;
    background:linear-gradient(to top,#fff 70%,rgba(255,255,255,0));
  }
}

/* ===============================
   Buttons
================================ */
.primary-wide{
  width:100%;
  padding:14px;
  border-radius:14px;
  font-weight:900;
  font-size:15px;
  border:none;
  cursor:pointer;
  background:#111827;
  color:#fff;
}
.primary-wide:disabled{opacity:.55}

/* ===============================
   Mobile bottom button
================================ */
@media(max-width:640px){
  .primary-wide{
    position:fixed;
    left:12px;
    right:12px;
    bottom:14px;
    z-index:50;
    box-shadow:0 18px 38px rgba(0,0,0,.18);
  }
  .page{padding-bottom:100px}
}

/* ===============================
   Preview
================================ */
.preview-inner{
  width:100%;
  max-width:450px;
  aspect-ratio:9/16;
  margin:0 auto;
  border-radius:16px;
  background:#fff;
  border:1px solid #eee;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}
img#outfit-image{
  width:100%;
  height:100%;
  object-fit:contain;
  display:none;
}

/* ===============================
   Status
================================ */
.statusbar{margin-top:10px;font-size:12px;color:var(--muted)}
.progress{height:8px;border-radius:999px;background:#eee;overflow:hidden}
.progress>div{height:100%;width:0;background:#111827;transition:width .25s}

/* ===============================
   Loading dots
================================ */
.loading-dots::after{
  content:"";
  animation:dots 1.4s infinite;
}
@keyframes dots{
  0%{content:""}
  33%{content:"."}
  66%{content:".."}
  100%{content:"..."}
}
</style>
</head>

<body>
<div class="page">

<header>
  <h2>Outfit Studio · Body Test</h2>
</header>

<main class="layout">

<!-- ================= LEFT ================= -->
<section class="card left-panel">

  <div class="left-scroll">

    <h3>穿搭條件</h3>

    <!-- 你原本所有表單內容 그대로 -->
    <!-- ⚠️ 這裡我略寫，實際你可以直接放回原本那段 -->
    <!-- 為了不讓訊息爆炸，我保留結構，功能完全相同 -->

    <!-- 表單略（性別 / slider / style / 配件） -->

  </div>

  <div class="left-footer">
    <button id="go-btn" class="primary-wide">產生穿搭圖</button>
    <div class="hint" id="form-hint">需登入才能生成</div>
    <div class="hint error" id="error-hint" style="display:none;"></div>
  </div>

</section>

<!-- ================= RIGHT ================= -->
<section class="card">

  <h3>AI 穿搭示意圖</h3>

  <div class="preview-inner" id="preview-box">
    <img id="outfit-image" />
    <div id="img-placeholder">尚未產生</div>
  </div>

  <div class="statusbar">
    狀態：<span id="status-text">等待操作</span>
    <div class="progress"><div id="progress-bar"></div></div>
  </div>

</section>

</main>
</div>

<script>
/* ===============================
   Mobile auto scroll
================================ */
function scrollToPreviewIfMobile(){
  if(!window.matchMedia("(max-width:768px)").matches) return;
  const el=document.getElementById("preview-box");
  if(el) el.scrollIntoView({behavior:"smooth",block:"start"});
}

/* ===============================
   Generate flow（簡化示意）
================================ */
const btn=document.getElementById("go-btn");
btn.addEventListener("click",async()=>{
  scrollToPreviewIfMobile();
  btn.disabled=true;
  btn.textContent="生成中…";
  document.getElementById("status-text").classList.add("loading-dots");

  try{
    // 呼叫你的 generateAll()
    // await generateAll();
  }catch(e){
    console.error(e);
  }finally{
    document.getElementById("status-text").classList.remove("loading-dots");
    btn.disabled=false;
    btn.textContent="再生成一套";
  }
});
</script>

</body>
</html>
